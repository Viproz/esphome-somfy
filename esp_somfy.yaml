esphome:
  name: esp_somfy
  platform: ESP8266
  board: d1_mini_lite
  
  arduino_version: espressif8266@2.3.2
  
  includes:
    - RFsomfy.h
    - SomfyRts.h
    - SomfyRts.cpp
  libraries:
    - FS
    - SmartRC-CC1101-Driver-Lib
    
#  libraries:
#    - Ticker

  comment: versao 2 - 10/abr/2020

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_pass
  use_address: 192.168.50.12
  manual_ip:
    static_ip: 192.168.50.12
    gateway: 192.168.50.1
    subnet: 255.255.255.0

web_server:
  port: 80

# Enable logging
logger:
  level: DEBUG
  esp8266_store_log_strings_in_flash: False
  baud_rate: 115200


api:
  password: !secret api_pass

ota:
  password: !secret ota_pass


cover:
- platform: custom
  lambda: |-
    std::vector<Cover *> covers;

    int blindNumber = 5;

    for(int i = 0 ; i < blindNumber ; ++i) {
      auto newComp = new RFsomfy(i);
      App.register_component(newComp);
      covers.push_back(newComp);
    }

    // In case the rolling codes get messed up you can reset them here
    //covers[0]->set_code(50);
    
    return {covers};

  covers:
    - name: "Living room shutter"
      device_class: shutter
      id: somfy0
    - name: "Kitchen shutter"
      device_class: shutter
      id: somfy1
    - name: "Chamber shutter"
      device_class: shutter
      id: somfy2
    - name: "Office shutter"
      device_class: shutter
      id: somfy3
    - name: "Office window shutter"
      device_class: shutter
      id: somfy4
